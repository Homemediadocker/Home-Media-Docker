"use strict";(self.webpackChunkdocker_docs=self.webpackChunkdocker_docs||[]).push([[7441],{4921:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>s,metadata:()=>d,toc:()=>a});var i=o(4848),r=o(8453);const s={id:"vpn",title:"VPN",description:"VPN Setup - NordVPN",sidebar_position:0},t="NordVPN - NordLynx",d={id:"home-media-containers/vpn",title:"VPN",description:"VPN Setup - NordVPN",source:"@site/docs/home-media-containers/vpn.mdx",sourceDirName:"home-media-containers",slug:"/home-media-containers/vpn",permalink:"/Home-Media-Docker/docs/home-media-containers/vpn",draft:!1,unlisted:!1,editUrl:"https://github.com/Homemediadocker/docs/edit/main/docs/home-media-containers/vpn.mdx",tags:[],version:"current",sidebarPosition:0,frontMatter:{id:"vpn",title:"VPN",description:"VPN Setup - NordVPN",sidebar_position:0},sidebar:"tutorialSidebar",previous:{title:"Home Media Containers",permalink:"/Home-Media-Docker/docs/category/home-media-containers"},next:{title:"Container Management",permalink:"/Home-Media-Docker/docs/home-media-containers/container-management"}},c={},a=[{value:"NordLynx and NordVPN Example Docker Compose",id:"nordlynx-and-nordvpn-example-docker-compose",level:2},{value:"NordVPN (Newer) with NordLynx capabilities inside it",id:"nordvpn-newer-with-nordlynx-capabilities-inside-it",level:3},{value:"NordLynx (Legacy Config - use NordVPN if possible)",id:"nordlynx-legacy-config---use-nordvpn-if-possible",level:3},{value:"Nord VPN Example <code>.env</code> file (For both compose options)",id:"nord-vpn-example-env-file-for-both-compose-options",level:3}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.admonition,{title:"Information",type:"info",children:[(0,i.jsxs)(n.p,{children:["This is not a requirement, but recommended to run with ",(0,i.jsx)(n.a,{href:"/Home-Media-Docker/docs/home-media-containers/transmission",children:"transmission"})]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"This is a headless VPN, there is not a UI associated with this container"})})]}),"\n",(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"nordvpn---nordlynx",children:"NordVPN - NordLynx"})}),"\n",(0,i.jsx)(n.p,{children:"NordVPN is a common vpn client/server solution that utilizes OpenVPN and Wireguard. This implementation is setup to use NordLynx, which is specifically for the Wireguard implementation. Wireguard is 2x-3x faster than OpenVPN."}),"\n",(0,i.jsx)(n.p,{children:"Comment out the VPN block if you don't need it, or if you want to use your own solution."}),"\n",(0,i.jsx)(n.p,{children:"Token and subscription to NordVPN Is needed to use this."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://support.nordvpn.com/hc/en-us/articles/20286980309265-How-to-use-a-token-with-NordVPN-on-Linux",children:"See here"})," for configuring/retrieving your ",(0,i.jsx)(n.code,{children:"TOKEN"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Note that ",(0,i.jsx)(n.code,{children:"transmission"}),"'s ports are configured to be used through the VPN. Simply remove the ",(0,i.jsx)(n.code,{children:"network_mode: service:vpn"})," from the dockerfile and uncomment the ports if you remove the vpn connection from this dockerfile."]}),"\n",(0,i.jsx)(n.admonition,{title:"Heads Up!",type:"warning",children:(0,i.jsxs)(n.p,{children:["You must explicitly configure the ",(0,i.jsx)(n.code,{children:"network_mode"})," to pass the containers through the VPN connection (if required like for ",(0,i.jsx)(n.code,{children:"transmission"}),"), otherwise they are exposed on the Docker host and your public IP will be exposed!"]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Just NordVPN Commands"}),"\n"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Command"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Start"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"docker compose up vpn -d"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Shutdown"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"docker compose down vpn"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Support"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.a,{href:"https://github.com/bubuntux/nordvpn",children:"bubuntux/nordvpn"}),"(Github)"]})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"nordlynx-and-nordvpn-example-docker-compose",children:"NordLynx and NordVPN Example Docker Compose"}),"\n",(0,i.jsx)(n.h3,{id:"nordvpn-newer-with-nordlynx-capabilities-inside-it",children:"NordVPN (Newer) with NordLynx capabilities inside it"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"services:\n  vpn:\n    container_name: ${VPN_CONTAINER_NAME}\n    image: ghcr.io/bubuntux/nordvpn\n    cap_add:\n      - NET_ADMIN # Required\n      - NET_RAW # Required\n      - SYS_MODULE\n    environment: # Review https://github.com/bubuntux/nordvpn#environment-variables\n      - TOKEN=${TOKEN} # Required\n      - CONNECT=${NORD_CONNECT_AREA} # if none provided you will connect to the recommended server\n      - DNS=${VPN_DNS}\n      - TZ=${TIMEZONE}\n      - TECHNOLOGY=${NORD_TECHNOLOGY} # NordLynx or OpenVPN - NordLynx is Wireguard and supposedly 3x-5x faster\n      - ALLOWED_IPS=${VPN_ALLOWED_IPS}\n      - NETWORK=${VPN_NET_LOCAL} # So it can be accessed within the local network\n      - NET_LOCAL=${VPN_NET_LOCAL} # So it can be accessed within the local network\n    ports:\n      - ${TRANSMISSION_HOST_PORT}:9091 # webui for Transmission - it is exposed via the docker service network internally\n      - ${TRANSMISSION_SEED_DISCOVERY_PORT_TCP}:51413 # for seed discovery - greatly improves performance even if not seeding\n      - ${TRANSMISSION_SEED_DISCOVERY_PORT_UDP}:51413/udp\n      - ${DUPLICATI_HOST_PORT}:8200\n    volumes:\n      - /lib/modules:/lib/modules:ro # Required to install wireguard module\n    sysctls:\n      - net.ipv6.conf.all.disable_ipv6=1 # Recomended if using ipv4 only\n    networks:\n      - homelab\n    restart: unless-stopped\n    profiles:\n      - all\n      - vpn\n"})}),"\n",(0,i.jsx)(n.h3,{id:"nordlynx-legacy-config---use-nordvpn-if-possible",children:"NordLynx (Legacy Config - use NordVPN if possible)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"services:\n  ### NORD VPN WITH WIREGUARD (NordLynx)\n  vpn_old:\n    container_name: ${VPN_CONTAINER_NAME}\n    image: ghcr.io/bubuntux/nordlynx\n    cap_add:\n      - NET_ADMIN #required\n      - NET_RAW # Required\n      - SYS_MODULE\n    security_opt:\n      - no-new-privileges:true\n    sysctls:\n      - net.ipv6.conf.all.disable_ipv6=1 # Recommended if using ipv4 only\n    environment:\n      - PRIVATE_KEY=${PRIVATE_KEY}= #required\n      - DNS=${VPN_DNS}\n      - ALLOWED_IPS=${VPN_ALLOWED_IPS}\n      - NET_LOCAL=${VPN_NET_LOCAL}\n      - TZ=${TIMEZONE}\n    ports:\n      - ${TRANSMISSION_HOST_PORT}:9091 # webui for Transmission - it is exposed via the docker service network internally\n      - ${TRANSMISSION_SEED_DISCOVERY_PORT_TCP}:51413 # for seed discovery - greatly improves performance even if not seeding\n      - ${TRANSMISSION_SEED_DISCOVERY_PORT_UDP}:51413/udp\n      - ${DUPLICATI_HOST_PORT}:8200\n    volumes:\n      - /lib/modules:/lib/modules:ro # Required to install wireguard module\n    restart: unless-stopped\n    networks:\n      - homelab\n    profiles:\n      - vpn_old\n"})}),"\n",(0,i.jsxs)(n.h3,{id:"nord-vpn-example-env-file-for-both-compose-options",children:["Nord VPN Example ",(0,i.jsx)(n.code,{children:".env"})," file (For both compose options)"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-conf",children:'## NORDVPN SPECIFIC VARIABLES\nVPN_CONTAINER_NAME="vpn"\nTOKEN=11111111111223123123123123asdba123 #CHANGE_ME - i am not used in this docker compose but if you need me i am here\nPRIVATE_KEY=sdlfkabakjhslkdgjadlfkjasdfhaskdjhagsdg #CHANGE_ME - i am used\nNORD_TECHNOLOGY=NordLynx # NordLynx or OpenVPN\nNORD_CONNECT_AREA=United_States\nNORD_CYBER_SEC=true\n\nVPN_DNS="8.8.8.8,8.8.4.4" #CHANGE_ME - this is google\'s DNS if that works for you\nVPN_ALLOWED_IPS="0.0.0.0/0" #CHANGE_ME - this allows all IPs\nVPN_NET_LOCAL="172.16.0.0/12,192.168.0.0/16" #CHANGE_ME if your network doesn\'t fit this schema\n'})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>t,x:()=>d});var i=o(6540);const r={},s=i.createContext(r);function t(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);